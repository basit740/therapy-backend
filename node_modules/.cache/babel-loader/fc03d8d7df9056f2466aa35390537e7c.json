{"ast":null,"code":"import { steps } from '../../data/new-version/steps';\nexport const initialState = {\n  versions: [],\n  selectedVersion: null,\n  firstFive: [],\n  secondFive: [],\n  isLoading: true\n};\nexport default function reducer(state, action) {\n  const pState = { ...state\n  };\n\n  if (action.type === 'DATA_FROM_SERVER') {\n    const recentVersions = action.payload.data.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n    const latestInProgress = recentVersions.find(v => {\n      return v.status === 'in_progress';\n    }); //console.log(latestInProgress.stepsCount);\n\n    pState.selectedVersion = { ...latestInProgress\n    };\n    console.log(latestInProgress);\n    const filtered = steps.filter(s => s.stepNumber !== latestInProgress.stepsCount);\n    pState.firstFive = [...filtered.slice(0, 5)];\n    pState.seocndFive = [...filtered.slice(5, 10)];\n    pState.isLoading = false;\n  } else if (action.type === 'DATA_LOADING') {\n    pState.isLoading = true;\n  } else if (action.type === 'SELECT_VERSION') {\n    pState.selectedVersion = action.payload.version;\n    const filtered = steps.filter(s => s.stepNumber !== state.selectedVersion.stepsCount);\n    pState.firstFive = [...filtered.slice(0, 5)];\n    pState.seocndFive = [...filtered.slice(5, 10)];\n    pState.isLoading = false;\n  }\n\n  return pState;\n}","map":{"version":3,"sources":["/Users/apple/Documents/work/fiverr/2021/December/boulmpos/Backups/latest2/src/components/Dashboard/newVersionReducer.js"],"names":["steps","initialState","versions","selectedVersion","firstFive","secondFive","isLoading","reducer","state","action","pState","type","recentVersions","payload","data","sort","a","b","Date","createdAt","latestInProgress","find","v","status","console","log","filtered","filter","s","stepNumber","stepsCount","slice","seocndFive","version"],"mappings":"AAAA,SAASA,KAAT,QAAsB,8BAAtB;AACA,OAAO,MAAMC,YAAY,GAAG;AAC3BC,EAAAA,QAAQ,EAAE,EADiB;AAE3BC,EAAAA,eAAe,EAAE,IAFU;AAG3BC,EAAAA,SAAS,EAAE,EAHgB;AAI3BC,EAAAA,UAAU,EAAE,EAJe;AAK3BC,EAAAA,SAAS,EAAE;AALgB,CAArB;AAQP,eAAe,SAASC,OAAT,CAAiBC,KAAjB,EAAwBC,MAAxB,EAAgC;AAC9C,QAAMC,MAAM,GAAG,EAAE,GAAGF;AAAL,GAAf;;AAEA,MAAIC,MAAM,CAACE,IAAP,KAAgB,kBAApB,EAAwC;AACvC,UAAMC,cAAc,GAAGH,MAAM,CAACI,OAAP,CAAeC,IAAf,CAAoBC,IAApB,CACtB,CAACC,CAAD,EAAIC,CAAJ,KAAU,IAAIC,IAAJ,CAASD,CAAC,CAACE,SAAX,IAAwB,IAAID,IAAJ,CAASF,CAAC,CAACG,SAAX,CADZ,CAAvB;AAIA,UAAMC,gBAAgB,GAAGR,cAAc,CAACS,IAAf,CAAqBC,CAAD,IAAO;AACnD,aAAOA,CAAC,CAACC,MAAF,KAAa,aAApB;AACA,KAFwB,CAAzB,CALuC,CASvC;;AAEAb,IAAAA,MAAM,CAACP,eAAP,GAAyB,EAAE,GAAGiB;AAAL,KAAzB;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAYL,gBAAZ;AAEA,UAAMM,QAAQ,GAAG1B,KAAK,CAAC2B,MAAN,CACfC,CAAD,IAAOA,CAAC,CAACC,UAAF,KAAiBT,gBAAgB,CAACU,UADzB,CAAjB;AAGApB,IAAAA,MAAM,CAACN,SAAP,GAAmB,CAAC,GAAGsB,QAAQ,CAACK,KAAT,CAAe,CAAf,EAAkB,CAAlB,CAAJ,CAAnB;AACArB,IAAAA,MAAM,CAACsB,UAAP,GAAoB,CAAC,GAAGN,QAAQ,CAACK,KAAT,CAAe,CAAf,EAAkB,EAAlB,CAAJ,CAApB;AAEArB,IAAAA,MAAM,CAACJ,SAAP,GAAmB,KAAnB;AACA,GArBD,MAqBO,IAAIG,MAAM,CAACE,IAAP,KAAgB,cAApB,EAAoC;AAC1CD,IAAAA,MAAM,CAACJ,SAAP,GAAmB,IAAnB;AACA,GAFM,MAEA,IAAIG,MAAM,CAACE,IAAP,KAAgB,gBAApB,EAAsC;AAC5CD,IAAAA,MAAM,CAACP,eAAP,GAAyBM,MAAM,CAACI,OAAP,CAAeoB,OAAxC;AAEA,UAAMP,QAAQ,GAAG1B,KAAK,CAAC2B,MAAN,CACfC,CAAD,IAAOA,CAAC,CAACC,UAAF,KAAiBrB,KAAK,CAACL,eAAN,CAAsB2B,UAD9B,CAAjB;AAGApB,IAAAA,MAAM,CAACN,SAAP,GAAmB,CAAC,GAAGsB,QAAQ,CAACK,KAAT,CAAe,CAAf,EAAkB,CAAlB,CAAJ,CAAnB;AACArB,IAAAA,MAAM,CAACsB,UAAP,GAAoB,CAAC,GAAGN,QAAQ,CAACK,KAAT,CAAe,CAAf,EAAkB,EAAlB,CAAJ,CAApB;AACArB,IAAAA,MAAM,CAACJ,SAAP,GAAmB,KAAnB;AACA;;AACD,SAAOI,MAAP;AACA","sourcesContent":["import { steps } from '../../data/new-version/steps';\nexport const initialState = {\n\tversions: [],\n\tselectedVersion: null,\n\tfirstFive: [],\n\tsecondFive: [],\n\tisLoading: true,\n};\n\nexport default function reducer(state, action) {\n\tconst pState = { ...state };\n\n\tif (action.type === 'DATA_FROM_SERVER') {\n\t\tconst recentVersions = action.payload.data.sort(\n\t\t\t(a, b) => new Date(b.createdAt) - new Date(a.createdAt)\n\t\t);\n\n\t\tconst latestInProgress = recentVersions.find((v) => {\n\t\t\treturn v.status === 'in_progress';\n\t\t});\n\n\t\t//console.log(latestInProgress.stepsCount);\n\n\t\tpState.selectedVersion = { ...latestInProgress };\n\t\tconsole.log(latestInProgress);\n\n\t\tconst filtered = steps.filter(\n\t\t\t(s) => s.stepNumber !== latestInProgress.stepsCount\n\t\t);\n\t\tpState.firstFive = [...filtered.slice(0, 5)];\n\t\tpState.seocndFive = [...filtered.slice(5, 10)];\n\n\t\tpState.isLoading = false;\n\t} else if (action.type === 'DATA_LOADING') {\n\t\tpState.isLoading = true;\n\t} else if (action.type === 'SELECT_VERSION') {\n\t\tpState.selectedVersion = action.payload.version;\n\n\t\tconst filtered = steps.filter(\n\t\t\t(s) => s.stepNumber !== state.selectedVersion.stepsCount\n\t\t);\n\t\tpState.firstFive = [...filtered.slice(0, 5)];\n\t\tpState.seocndFive = [...filtered.slice(5, 10)];\n\t\tpState.isLoading = false;\n\t}\n\treturn pState;\n}\n"]},"metadata":{},"sourceType":"module"}