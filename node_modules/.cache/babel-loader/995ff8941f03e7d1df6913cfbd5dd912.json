{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Documents/work/fiverr/2021/December/boulmpos/Backups/latest2/src/components/Dashboard/CreateNewVersion/StepTwo/StepTwo.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useContext, useReducer } from 'react';\nimport { getIssues } from '../../../../api/steptwo'; //import AuthContext from '../../../../store/auth-context';\n\nimport NewVersionContext from '../../../../store/new-version-context';\nimport reducer, { ACTIONS } from './reducer'; // skeleton\n\nimport './StepTwo.css'; //import Feeling from './Feeling.js';\n\nimport FeelingCard from './FeelingCard.js';\nimport StepTwoStatic from './StepTwoStatic';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EMPTY_ARRAY = [];\nconst issues = {\n  low: [],\n  ///issueImpact='low'\n  medium: [],\n  //issueImpactType='medium'\n  high: [],\n  critical: [],\n  dragId: null,\n  dragSrcId: null,\n  dataLoading: true\n}; // actual functoin definition starts here\n\nconst StepTwo = props => {\n  _s();\n\n  //const authCtx = useContext(AuthContext);\n  const newVerCtx = useContext(NewVersionContext);\n  console.log('in steptwo');\n  const [state, dispatch] = useReducer(reducer, issues); //props.onStateChange(state);\n\n  useEffect(() => {\n    props.onStateChange(state);\n  }, [state, props]);\n  console.log('local state always renders', state); // const [firstFeelings, setFirstFeelings] = useState(FEELING_CARDS[0].feelings);\n  // const [secondFeelings, setSecondFeelings] = useState(\n  // \tFEELING_CARDS[1].feelings\n  // );\n  // const [thirdFeelings, setThirdFeelings] = useState(FEELING_CARDS[2].feelings);\n  // const [fourthFeelings, setFourthFeelings] = useState(\n  // \tFEELING_CARDS[3].feelings\n  // );\n  ///////////////////////// DRAG & DROP FUNCTIONALITY HERE /////////////////////\n\n  const dragStartHandler = event => {\n    console.log('drag is started', event.target.parentNode.id);\n    event.target.classList.add('dragging');\n\n    if (event.target.parentNode.id === '4') {\n      dispatch({\n        type: ACTIONS.DRAGGING,\n        payload: {\n          dragId: event.target.id,\n          dragSrcId: '4'\n        }\n      });\n    }\n\n    if (event.target.parentNode.id === '3') {\n      dispatch({\n        type: ACTIONS.DRAGGING,\n        payload: {\n          dragId: event.target.id,\n          dragSrcId: '3'\n        }\n      });\n    }\n\n    if (event.target.parentNode.id === '2') {\n      dispatch({\n        type: ACTIONS.DRAGGING,\n        payload: {\n          dragId: event.target.id,\n          dragSrcId: '2'\n        }\n      });\n    }\n\n    if (event.target.parentNode.id === '1') {\n      dispatch({\n        type: ACTIONS.DRAGGING,\n        payload: {\n          dragId: event.target.id,\n          dragSrcId: '1'\n        }\n      });\n    }\n  };\n\n  const dragEndHandler = event => {\n    event.target.classList.remove('dragging');\n  };\n\n  const dropHandler = event => {\n    event.preventDefault();\n    newVerCtx.stepOneUnSaver();\n\n    if (event.target.id === '1') {\n      if (state.dragSrcId === '1') {\n        return;\n      }\n\n      dispatch({\n        type: ACTIONS.DROP_ON_LOW,\n        payload: {\n          id: event.target.id\n        }\n      });\n    } else if (event.target.id === '2') {\n      if (state.dragSrcId === '2') {\n        return;\n      }\n\n      dispatch({\n        type: ACTIONS.DROP_ON_MEDIUM,\n        payload: {\n          id: event.target.id\n        }\n      });\n    } else if (event.target.id === '3') {\n      if (state.dragSrcId === '3') {\n        return;\n      }\n\n      dispatch({\n        type: ACTIONS.DROP_ON_HIGH,\n        payload: {\n          id: event.target.id\n        }\n      });\n    } else if (event.target.id === '4') {\n      if (state.dragSrcId === '4') {\n        return;\n      }\n\n      dispatch({\n        type: ACTIONS.DROP_ON_CRITICAL,\n        payload: {\n          id: event.target.id\n        }\n      });\n    } // passing state\n    //newVerCtx.stepTwoIssuesModifier(state);\n\n  };\n\n  const allowDrop = event => {\n    //console.log('dragging over element');\n    event.preventDefault();\n  }; ////////////////////////// END DRAG & DROP FUNCTIONALITY HERE ////////////\n\n\n  useEffect(() => {\n    console.log('in useffect 1'); // data data from server\n\n    (async function () {\n      //newVerCtx.stepTwoClearer();\n      console.log('in useeffect 2');\n      dispatch({\n        type: ACTIONS.SET_DATA_LOADING\n      });\n      let response = await getIssues(newVerCtx.versionId); //setDataIsLoading(false);\n\n      console.log('in user effect 3');\n\n      if (response.success && response.data.length > 0) {\n        console.log('data', response.data);\n        dispatch({\n          type: ACTIONS.DATA_FROM_SERVER,\n          payload: {\n            data: response.data\n          }\n        });\n      } else {\n        // working with local data\n        const issues = {\n          low: [{\n            issueTitle: `${newVerCtx.stepOneFirst}`,\n            issueImpactType: 'low',\n            id: '1'\n          }],\n          medium: [{\n            issueTitle: `${newVerCtx.stepOneSecond}`,\n            issueImpactType: 'medium',\n            id: '2'\n          }],\n          high: [{\n            issueTitle: `${newVerCtx.stepOneThird}`,\n            issueImpactType: 'high',\n            id: '3'\n          }],\n          critical: [{\n            issueTitle: `${newVerCtx.stepOneFourth}`,\n            issueImpactType: 'critical',\n            id: '4'\n          }],\n          dragId: null,\n          dragSrcId: null\n        };\n        dispatch({\n          type: ACTIONS.DATA_FROM_STEP_ONE,\n          payload: {\n            data: issues\n          }\n        });\n      }\n    })();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"stepTwoOfEleven\",\n    children: [/*#__PURE__*/_jsxDEV(StepTwoStatic, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"feelings-cards-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feeling-card\",\n        id: \"1\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"feeling-card__title\",\n          children: \"Low Impact\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(FeelingCard, {\n          id: \"1\",\n          feelings: state.dataLoading ? EMPTY_ARRAY : state.low,\n          onDragStart: dragStartHandler,\n          onDragEnd: dragEndHandler,\n          onDragOver: allowDrop,\n          onDrop: dropHandler,\n          isLoading: state.dataLoading\n        }, 1, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feeling-card\",\n        id: \"2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"feeling-card__title\",\n          children: \"Medium Impact\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(FeelingCard, {\n          id: \"2\",\n          feelings: state.dataLoading ? EMPTY_ARRAY : state.medium,\n          onDragStart: dragStartHandler,\n          onDragEnd: dragEndHandler,\n          onDragOver: allowDrop,\n          onDrop: dropHandler,\n          isLoading: state.dataLoading\n        }, 2, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feeling-card\",\n        id: \"3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"feeling-card__title\",\n          children: \"High Impact\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(FeelingCard, {\n          id: \"3\",\n          feelings: state.dataLoading ? EMPTY_ARRAY : state.high,\n          onDragStart: dragStartHandler,\n          onDragEnd: dragEndHandler,\n          onDragOver: allowDrop,\n          onDrop: dropHandler,\n          isLoading: state.dataLoading\n        }, 3, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feeling-card\",\n        id: \"4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"feeling-card__title\",\n          children: \"Critical Impact\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(FeelingCard, {\n          id: \"4\",\n          feelings: state.dataLoading ? EMPTY_ARRAY : state.critical,\n          onDragStart: dragStartHandler,\n          onDragEnd: dragEndHandler,\n          onDragOver: allowDrop,\n          onDrop: dropHandler,\n          isLoading: state.dataLoading\n        }, 4, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 207,\n    columnNumber: 3\n  }, this);\n};\n\n_s(StepTwo, \"7++gHRGqPNaqGTvNa1Zo1mRdupI=\");\n\n_c = StepTwo;\nexport default StepTwo;\n\nvar _c;\n\n$RefreshReg$(_c, \"StepTwo\");","map":{"version":3,"sources":["/Users/apple/Documents/work/fiverr/2021/December/boulmpos/Backups/latest2/src/components/Dashboard/CreateNewVersion/StepTwo/StepTwo.js"],"names":["React","useEffect","useContext","useReducer","getIssues","NewVersionContext","reducer","ACTIONS","FeelingCard","StepTwoStatic","EMPTY_ARRAY","issues","low","medium","high","critical","dragId","dragSrcId","dataLoading","StepTwo","props","newVerCtx","console","log","state","dispatch","onStateChange","dragStartHandler","event","target","parentNode","id","classList","add","type","DRAGGING","payload","dragEndHandler","remove","dropHandler","preventDefault","stepOneUnSaver","DROP_ON_LOW","DROP_ON_MEDIUM","DROP_ON_HIGH","DROP_ON_CRITICAL","allowDrop","SET_DATA_LOADING","response","versionId","success","data","length","DATA_FROM_SERVER","issueTitle","stepOneFirst","issueImpactType","stepOneSecond","stepOneThird","stepOneFourth","DATA_FROM_STEP_ONE"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext, useReducer } from 'react';\nimport { getIssues } from '../../../../api/steptwo';\n//import AuthContext from '../../../../store/auth-context';\nimport NewVersionContext from '../../../../store/new-version-context';\n\nimport reducer, { ACTIONS } from './reducer';\n\n// skeleton\n\nimport './StepTwo.css';\n//import Feeling from './Feeling.js';\nimport FeelingCard from './FeelingCard.js';\n\nimport StepTwoStatic from './StepTwoStatic';\n\nconst EMPTY_ARRAY = [];\n\nconst issues = {\n\tlow: [], ///issueImpact='low'\n\tmedium: [], //issueImpactType='medium'\n\thigh: [],\n\tcritical: [],\n\tdragId: null,\n\tdragSrcId: null,\n\tdataLoading: true,\n};\n\n// actual functoin definition starts here\nconst StepTwo = (props) => {\n\t//const authCtx = useContext(AuthContext);\n\tconst newVerCtx = useContext(NewVersionContext);\n\n\tconsole.log('in steptwo');\n\n\tconst [state, dispatch] = useReducer(reducer, issues);\n\n\t//props.onStateChange(state);\n\n\tuseEffect(() => {\n\t\tprops.onStateChange(state);\n\t}, [state, props]);\n\n\tconsole.log('local state always renders', state);\n\n\t// const [firstFeelings, setFirstFeelings] = useState(FEELING_CARDS[0].feelings);\n\t// const [secondFeelings, setSecondFeelings] = useState(\n\t// \tFEELING_CARDS[1].feelings\n\t// );\n\t// const [thirdFeelings, setThirdFeelings] = useState(FEELING_CARDS[2].feelings);\n\t// const [fourthFeelings, setFourthFeelings] = useState(\n\t// \tFEELING_CARDS[3].feelings\n\t// );\n\n\t///////////////////////// DRAG & DROP FUNCTIONALITY HERE /////////////////////\n\n\tconst dragStartHandler = (event) => {\n\t\tconsole.log('drag is started', event.target.parentNode.id);\n\t\tevent.target.classList.add('dragging');\n\n\t\tif (event.target.parentNode.id === '4') {\n\t\t\tdispatch({\n\t\t\t\ttype: ACTIONS.DRAGGING,\n\t\t\t\tpayload: { dragId: event.target.id, dragSrcId: '4' },\n\t\t\t});\n\t\t}\n\t\tif (event.target.parentNode.id === '3') {\n\t\t\tdispatch({\n\t\t\t\ttype: ACTIONS.DRAGGING,\n\t\t\t\tpayload: { dragId: event.target.id, dragSrcId: '3' },\n\t\t\t});\n\t\t}\n\t\tif (event.target.parentNode.id === '2') {\n\t\t\tdispatch({\n\t\t\t\ttype: ACTIONS.DRAGGING,\n\t\t\t\tpayload: { dragId: event.target.id, dragSrcId: '2' },\n\t\t\t});\n\t\t}\n\t\tif (event.target.parentNode.id === '1') {\n\t\t\tdispatch({\n\t\t\t\ttype: ACTIONS.DRAGGING,\n\t\t\t\tpayload: { dragId: event.target.id, dragSrcId: '1' },\n\t\t\t});\n\t\t}\n\t};\n\n\tconst dragEndHandler = (event) => {\n\t\tevent.target.classList.remove('dragging');\n\t};\n\n\tconst dropHandler = (event) => {\n\t\tevent.preventDefault();\n\n\t\tnewVerCtx.stepOneUnSaver();\n\n\t\tif (event.target.id === '1') {\n\t\t\tif (state.dragSrcId === '1') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdispatch({\n\t\t\t\ttype: ACTIONS.DROP_ON_LOW,\n\t\t\t\tpayload: { id: event.target.id },\n\t\t\t});\n\t\t} else if (event.target.id === '2') {\n\t\t\tif (state.dragSrcId === '2') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdispatch({\n\t\t\t\ttype: ACTIONS.DROP_ON_MEDIUM,\n\t\t\t\tpayload: { id: event.target.id },\n\t\t\t});\n\t\t} else if (event.target.id === '3') {\n\t\t\tif (state.dragSrcId === '3') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdispatch({\n\t\t\t\ttype: ACTIONS.DROP_ON_HIGH,\n\t\t\t\tpayload: { id: event.target.id },\n\t\t\t});\n\t\t} else if (event.target.id === '4') {\n\t\t\tif (state.dragSrcId === '4') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdispatch({\n\t\t\t\ttype: ACTIONS.DROP_ON_CRITICAL,\n\t\t\t\tpayload: { id: event.target.id },\n\t\t\t});\n\t\t}\n\n\t\t// passing state\n\t\t//newVerCtx.stepTwoIssuesModifier(state);\n\t};\n\n\tconst allowDrop = (event) => {\n\t\t//console.log('dragging over element');\n\t\tevent.preventDefault();\n\t};\n\n\t////////////////////////// END DRAG & DROP FUNCTIONALITY HERE ////////////\n\n\tuseEffect(() => {\n\t\tconsole.log('in useffect 1');\n\t\t// data data from server\n\t\t(async function () {\n\t\t\t//newVerCtx.stepTwoClearer();\n\t\t\tconsole.log('in useeffect 2');\n\t\t\tdispatch({ type: ACTIONS.SET_DATA_LOADING });\n\n\t\t\tlet response = await getIssues(newVerCtx.versionId);\n\t\t\t//setDataIsLoading(false);\n\n\t\t\tconsole.log('in user effect 3');\n\n\t\t\tif (response.success && response.data.length > 0) {\n\t\t\t\tconsole.log('data', response.data);\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: ACTIONS.DATA_FROM_SERVER,\n\t\t\t\t\tpayload: { data: response.data },\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// working with local data\n\n\t\t\t\tconst issues = {\n\t\t\t\t\tlow: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tissueTitle: `${newVerCtx.stepOneFirst}`,\n\t\t\t\t\t\t\tissueImpactType: 'low',\n\t\t\t\t\t\t\tid: '1',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tmedium: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tissueTitle: `${newVerCtx.stepOneSecond}`,\n\t\t\t\t\t\t\tissueImpactType: 'medium',\n\t\t\t\t\t\t\tid: '2',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\thigh: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tissueTitle: `${newVerCtx.stepOneThird}`,\n\t\t\t\t\t\t\tissueImpactType: 'high',\n\t\t\t\t\t\t\tid: '3',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tcritical: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tissueTitle: `${newVerCtx.stepOneFourth}`,\n\t\t\t\t\t\t\tissueImpactType: 'critical',\n\t\t\t\t\t\t\tid: '4',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\n\t\t\t\t\tdragId: null,\n\t\t\t\t\tdragSrcId: null,\n\t\t\t\t};\n\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: ACTIONS.DATA_FROM_STEP_ONE,\n\t\t\t\t\tpayload: { data: issues },\n\t\t\t\t});\n\t\t\t}\n\t\t})();\n\t}, []);\n\n\treturn (\n\t\t<section className='stepTwoOfEleven'>\n\t\t\t<StepTwoStatic />\n\n\t\t\t<div className='feelings-cards-container'>\n\t\t\t\t<div className='feeling-card' id='1'>\n\t\t\t\t\t<div className='feeling-card__title'>Low Impact</div>\n\n\t\t\t\t\t<FeelingCard\n\t\t\t\t\t\tid='1'\n\t\t\t\t\t\tkey={1}\n\t\t\t\t\t\tfeelings={state.dataLoading ? EMPTY_ARRAY : state.low}\n\t\t\t\t\t\tonDragStart={dragStartHandler}\n\t\t\t\t\t\tonDragEnd={dragEndHandler}\n\t\t\t\t\t\tonDragOver={allowDrop}\n\t\t\t\t\t\tonDrop={dropHandler}\n\t\t\t\t\t\tisLoading={state.dataLoading}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className='feeling-card' id='2'>\n\t\t\t\t\t<div className='feeling-card__title'>Medium Impact</div>\n\t\t\t\t\t<FeelingCard\n\t\t\t\t\t\tid='2'\n\t\t\t\t\t\tkey={2}\n\t\t\t\t\t\tfeelings={state.dataLoading ? EMPTY_ARRAY : state.medium}\n\t\t\t\t\t\tonDragStart={dragStartHandler}\n\t\t\t\t\t\tonDragEnd={dragEndHandler}\n\t\t\t\t\t\tonDragOver={allowDrop}\n\t\t\t\t\t\tonDrop={dropHandler}\n\t\t\t\t\t\tisLoading={state.dataLoading}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className='feeling-card' id='3'>\n\t\t\t\t\t<div className='feeling-card__title'>High Impact</div>\n\t\t\t\t\t<FeelingCard\n\t\t\t\t\t\tid='3'\n\t\t\t\t\t\tkey={3}\n\t\t\t\t\t\tfeelings={state.dataLoading ? EMPTY_ARRAY : state.high}\n\t\t\t\t\t\tonDragStart={dragStartHandler}\n\t\t\t\t\t\tonDragEnd={dragEndHandler}\n\t\t\t\t\t\tonDragOver={allowDrop}\n\t\t\t\t\t\tonDrop={dropHandler}\n\t\t\t\t\t\tisLoading={state.dataLoading}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className='feeling-card' id='4'>\n\t\t\t\t\t<div className='feeling-card__title'>Critical Impact</div>\n\t\t\t\t\t<FeelingCard\n\t\t\t\t\t\tid='4'\n\t\t\t\t\t\tkey={4}\n\t\t\t\t\t\tfeelings={state.dataLoading ? EMPTY_ARRAY : state.critical}\n\t\t\t\t\t\tonDragStart={dragStartHandler}\n\t\t\t\t\t\tonDragEnd={dragEndHandler}\n\t\t\t\t\t\tonDragOver={allowDrop}\n\t\t\t\t\t\tonDrop={dropHandler}\n\t\t\t\t\t\tisLoading={state.dataLoading}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n\nexport default StepTwo;\n"]},"metadata":{},"sourceType":"module"}