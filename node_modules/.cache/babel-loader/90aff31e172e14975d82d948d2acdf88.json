{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Documents/work/fiverr/2021/December/boulmpos/Backups/latest2/src/components/Dashboard/CreateNewVersion/StepTwo/StepTwo.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext, useReducer } from 'react';\nimport { getIssues } from '../../../../api/steptwo';\nimport AuthContext from '../../../../store/auth-context';\nimport NewVersionContext from '../../../../store/new-version-context';\nimport './StepTwo.css';\nimport Feeling from './Feeling.js';\nimport FeelingCard from './FeelingCard.js';\nimport StepTwoStatic from './StepTwoStatic';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FEELING_CARDS = [{\n  title: 'Low Impact',\n  id: 'low-impact',\n  feelings: [{\n    issueTitle: 'low impact',\n    issueImpactType: 'low',\n    id: '1'\n  }]\n}, {\n  title: 'Medium Impact',\n  id: 'medium-impact',\n  feelings: [{\n    issueTitle: 'medium impact',\n    issueImpactType: 'medium',\n    id: '2'\n  }]\n}, {\n  title: 'High Impact',\n  id: 'high-impact',\n  feelings: [{\n    issueTitle: 'high impact',\n    issueImpactType: 'high',\n    id: '3'\n  }]\n}, {\n  title: 'Critical Impact',\n  id: 'critical-impact',\n  feelings: [{\n    issueTitle: 'critical impact',\n    issueImpactType: 'critical',\n    id: '4'\n  }]\n}];\nconst issues = {\n  low: [{\n    issueTitle: 'low impact',\n    issueImpactType: 'low',\n    id: '1'\n  }],\n  medium: [{\n    issueTitle: 'medium impact',\n    issueImpactType: 'medium',\n    id: '2'\n  }],\n  high: [{\n    issueTitle: 'high impact',\n    issueImpactType: 'high',\n    id: '3'\n  }],\n  critical: [{\n    issueTitle: 'critical impact',\n    issueImpactType: 'critical',\n    id: '4'\n  }],\n  dragId: null,\n  dragSrcId: null\n};\nconst ACTTIONS = {\n  DROP_ON_LOW: 'drop_on_low',\n  DROP_ON_MEDIUM: 'drop_on_medium',\n  DROP_ON_HIGH: 'drop_on_high',\n  DROP_ON_CRITICAL: 'drop_on_critical',\n  DRAGGING: 'dragging'\n};\n\nfunction reducer(state, action) {\n  let id = state.dragId; // let dragSrc = action.payload.dragSourceId;\n\n  let prevState = { ...state\n  };\n  let issue = null;\n\n  if (action.type === ACTTIONS.DRAGGING) {\n    state.dragId = action.payload.dragId;\n    state.dragSrcId = action.payload.dragSrcId;\n    return state;\n  }\n\n  if (action.type === ACTTIONS.DROP_ON_LOW) {\n    if (state.dragSrcId === 2) {\n      issue = prevState.medium.find(isu => isu.id == id);\n      prevState.medium = prevState.medium.filter(isu => isu.id != id);\n    } else if (state.dragSrcId === 3) {\n      issue = prevState.high.find(isu => isu.id == id);\n      prevState.high = prevState.high.filter(isu => isu.id != id);\n    } else {\n      issue = prevState.critical.find(isu => isu.id == id);\n      prevState.critical = prevState.critical.filter(isu => isu.id != id);\n    }\n\n    prevState.low.push(issue);\n    return state = { ...prevState\n    };\n  } else if (action.type === ACTTIONS.DROP_ON_MEDIUM) {\n    if (state.dragSrcId === 3) {\n      issue = prevState.high.find(isu => isu.id == id);\n      prevState.high = prevState.high.filter(isu => isu.id != id);\n    } else if (state.dragSrcId === 4) {\n      issue = prevState.critical.find(isu => isu.id == id);\n      prevState.critical = prevState.critical.filter(isu => isu.id != id);\n    } else {\n      issue = prevState.low.find(isu => isu.id == id);\n      prevState.low = prevState.low.filter(isu => isu.id != id);\n    }\n\n    prevState.medium.push(issue);\n    return state = { ...prevState\n    };\n  } else if (action.type === ACTTIONS.DROP_ON_HIGH) {\n    if (state.dragSrcId === 2) {\n      issue = prevState.medium.find(isu => isu.id == id);\n      prevState.medium = prevState.medium.filter(isu => isu.id != id);\n    } else if (state.dragSrcId === 4) {\n      issue = prevState.critical.find(isu => isu.id == id);\n      prevState.critical = prevState.critical.filter(isu => isu.id != id);\n    } else {\n      issue = prevState.low.find(isu => isu.id == id);\n      prevState.low = prevState.low.filter(isu => isu.id != id);\n    }\n\n    prevState.high.push(issue);\n    return state = { ...prevState\n    };\n  } else if (action.type === ACTTIONS.DROP_ON_CRITICAL) {\n    if (state.dragSrcId === 2) {\n      issue = prevState.medium.find(isu => isu.id == id);\n      prevState.medium = prevState.medium.filter(isu => isu.id != id);\n    } else if (state.dragSrcId === 3) {\n      issue = prevState.high.find(isu => isu.id == id);\n      prevState.high = prevState.high.filter(isu => isu.id != id);\n    } else {\n      issue = prevState.low.find(isu => isu.id == id);\n      prevState.low = prevState.low.filter(isu => isu.id != id);\n    }\n\n    prevState.critical.push(issue);\n    return state = { ...prevState\n    };\n  } else {\n    return state;\n  }\n} // actual functoin definition starts here\n\n\nconst StepTwo = props => {\n  _s();\n\n  const [state, dispatch] = useReducer(reducer, issues);\n  const authCtx = useContext(AuthContext);\n  const newVerCtx = useContext(NewVersionContext);\n  const [feelingCards, setFeelingCards] = useState(FEELING_CARDS);\n  const [firstFeelings, setFirstFeelings] = useState(FEELING_CARDS[0].feelings);\n  const [secondFeelings, setSecondFeelings] = useState(FEELING_CARDS[1].feelings);\n  const [thirdFeelings, setThirdFeelings] = useState(FEELING_CARDS[2].feelings);\n  const [fourthFeelings, setFourthFeelings] = useState(FEELING_CARDS[3].feelings); ///////////////////////// DRAG & DROP FUNCTIONALITY HERE /////////////////////\n\n  const [draggingFeeling, setDraggingFeeling] = useState(null);\n  const [dragSourceId, setDragSourceId] = useState(null); ////////////////////////////////////// HELPER FUNCTIONS       /////////////////////\n\n  const dragStartHandler = event => {\n    console.log('drag is started', event.target.parentNode.id);\n    event.target.classList.add('dragging');\n\n    if (event.target.parentNode.id == 4) {\n      dispatch({\n        type: ACTTIONS.DRAGGING,\n        payload: {\n          dragId: event.target.id,\n          dragSrcId: 4\n        }\n      });\n    }\n\n    if (event.target.parentNode.id == 3) {\n      dispatch({\n        type: ACTTIONS.DRAGGING,\n        payload: {\n          dragId: event.target.id,\n          dragSrcId: 3\n        }\n      });\n    }\n\n    if (event.target.parentNode.id == 2) {\n      dispatch({\n        type: ACTTIONS.DRAGGING,\n        payload: {\n          dragId: event.target.id,\n          dragSrcId: 2\n        }\n      });\n    }\n\n    if (event.target.parentNode.id == 1) {\n      dispatch({\n        type: ACTTIONS.DRAGGING,\n        payload: {\n          dragId: event.target.id,\n          dragSrcId: 1\n        }\n      });\n    }\n  };\n\n  const dragEndHandler = event => {\n    event.target.classList.remove('dragging');\n  };\n\n  const dropHandler = event => {\n    event.preventDefault();\n    newVerCtx.stepOneUnSaver();\n\n    if (event.target.id == 1) {\n      if (state.dragSrcId == 1) {\n        return;\n      }\n\n      dispatch({\n        type: ACTTIONS.DROP_ON_LOW,\n        payload: {\n          id: event.target.id\n        }\n      });\n    } else if (event.target.id == 2) {\n      if (state.dragSrcId == 2) {\n        return;\n      }\n\n      dispatch({\n        type: ACTTIONS.DROP_ON_MEDIUM,\n        payload: {\n          id: event.target.id\n        }\n      });\n    } else if (event.target.id == 3) {\n      if (state.dragSrcId == 3) {\n        return;\n      }\n\n      dispatch({\n        type: ACTTIONS.DROP_ON_HIGH,\n        payload: {\n          id: event.target.id\n        }\n      });\n    } else if (event.target.id == 4) {\n      if (state.dragSrcId == 4) {\n        return;\n      }\n\n      dispatch({\n        type: ACTTIONS.DROP_ON_CRITICAL,\n        payload: {\n          id: event.target.id\n        }\n      });\n    }\n\n    newVerCtx.stepTwoIssuesModifier(state); // const issues = {\n    // \tlow: firstFeelings,\n    // \tmedium: secondFeelings,\n    // \thigh: thirdFeelings,\n    // \tcritical: fourthFeelings,\n    // };\n    // newVerCtx.stepTwoIssuesModifier(issues);\n  };\n\n  const allowDrop = event => {\n    console.log('dragging over element');\n    event.preventDefault();\n  }; ////////////////////////// END DRAG & DROP FUNCTIONALITY HERE ////////////\n\n\n  useEffect(() => {\n    // if (newVerCtx.stepOneSaved) {\n    // \tsetFirstFeelings((prev) => {\n    // \t\treturn [\n    // \t\t\t{\n    // \t\t\t\tid: '1',\n    // \t\t\t\tissueTitle: newVerCtx.stepOneFirst,\n    // \t\t\t\tissueImpactType: 'low',\n    // \t\t\t},\n    // \t\t];\n    // \t});\n    // \tsetSecondFeelings((prev) => {\n    // \t\treturn [\n    // \t\t\t{\n    // \t\t\t\tid: '2',\n    // \t\t\t\tissueTitle: newVerCtx.stepOneSecond,\n    // \t\t\t\tissueImpactType: 'medium',\n    // \t\t\t},\n    // \t\t];\n    // \t});\n    // \tsetThirdFeelings((prev) => {\n    // \t\treturn [\n    // \t\t\t{\n    // \t\t\t\tid: '3',\n    // \t\t\t\tissueTitle: newVerCtx.stepOneThird,\n    // \t\t\t\tissueImpactType: 'high',\n    // \t\t\t},\n    // \t\t];\n    // \t});\n    // \tsetFourthFeelings([]);\n    // }\n    // for stepTwo Issues in NewVersionContext\n    // (async function () {\n    // \tlet response = await getIssues(newVerCtx.versionId);\n    // \t//console.log(response.data[0].issueImpactType[0]);\n    // \tif (response.success && response.data.length > 0) {\n    // \t\tresponse.data.map((issue) => {\n    // \t\t\tif (issue.issueImpactType[0] === 'low') {\n    // \t\t\t\tsetFirstFeelings((prev) => [issue]);\n    // \t\t\t} else if (issue.issueImpactType[0] === 'medium') {\n    // \t\t\t\tsetSecondFeelings((prev) => [issue]);\n    // \t\t\t} else if (issue.issueImpactType[0] === 'high') {\n    // \t\t\t\tsetThirdFeelings((prev) => [issue]);\n    // \t\t\t} else if (issue.issueImpactType[0] === 'critical') {\n    // \t\t\t\tsetFourthFeelings((prev) => [issue]);\n    // \t\t\t}\n    // \t\t});\n    // \t\tconsole.log(response.data);\n    // \t}\n    // })();\n    const issues = {\n      low: firstFeelings,\n      medium: secondFeelings,\n      high: thirdFeelings,\n      critical: fourthFeelings\n    };\n    newVerCtx.stepTwoIssuesModifier(issues);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"stepTwoOfEleven\",\n    children: [/*#__PURE__*/_jsxDEV(StepTwoStatic, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"feelings-cards-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feeling-card\",\n        id: \"1\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"feeling-card__title\",\n          children: feelingCards[0].title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(FeelingCard, {\n          id: \"1\",\n          feelings: state.low,\n          onDragStart: dragStartHandler,\n          onDragEnd: dragEndHandler,\n          onDragOver: allowDrop,\n          onDrop: dropHandler\n        }, 1, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feeling-card\",\n        id: \"2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"feeling-card__title\",\n          children: feelingCards[1].title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(FeelingCard, {\n          id: \"2\",\n          feelings: state.medium,\n          onDragStart: dragStartHandler,\n          onDragEnd: dragEndHandler,\n          onDragOver: allowDrop,\n          onDrop: dropHandler\n        }, 2, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feeling-card\",\n        id: \"3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"feeling-card__title\",\n          children: feelingCards[2].title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(FeelingCard, {\n          id: \"3\",\n          feelings: state.high,\n          onDragStart: dragStartHandler,\n          onDragEnd: dragEndHandler,\n          onDragOver: allowDrop,\n          onDrop: dropHandler\n        }, 3, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feeling-card\",\n        id: \"4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"feeling-card__title\",\n          children: feelingCards[3].title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(FeelingCard, {\n          id: \"4\",\n          feelings: state.critical,\n          onDragStart: dragStartHandler,\n          onDragEnd: dragEndHandler,\n          onDragOver: allowDrop,\n          onDrop: dropHandler\n        }, 4, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 306,\n    columnNumber: 3\n  }, this);\n};\n\n_s(StepTwo, \"WXKZOVKJzit3vZRCA0VorTBUsAI=\");\n\n_c = StepTwo;\nexport default StepTwo;\n\nvar _c;\n\n$RefreshReg$(_c, \"StepTwo\");","map":{"version":3,"sources":["/Users/apple/Documents/work/fiverr/2021/December/boulmpos/Backups/latest2/src/components/Dashboard/CreateNewVersion/StepTwo/StepTwo.js"],"names":["React","useState","useEffect","useContext","useReducer","getIssues","AuthContext","NewVersionContext","Feeling","FeelingCard","StepTwoStatic","FEELING_CARDS","title","id","feelings","issueTitle","issueImpactType","issues","low","medium","high","critical","dragId","dragSrcId","ACTTIONS","DROP_ON_LOW","DROP_ON_MEDIUM","DROP_ON_HIGH","DROP_ON_CRITICAL","DRAGGING","reducer","state","action","prevState","issue","type","payload","find","isu","filter","push","StepTwo","props","dispatch","authCtx","newVerCtx","feelingCards","setFeelingCards","firstFeelings","setFirstFeelings","secondFeelings","setSecondFeelings","thirdFeelings","setThirdFeelings","fourthFeelings","setFourthFeelings","draggingFeeling","setDraggingFeeling","dragSourceId","setDragSourceId","dragStartHandler","event","console","log","target","parentNode","classList","add","dragEndHandler","remove","dropHandler","preventDefault","stepOneUnSaver","stepTwoIssuesModifier","allowDrop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext, useReducer } from 'react';\nimport { getIssues } from '../../../../api/steptwo';\nimport AuthContext from '../../../../store/auth-context';\nimport NewVersionContext from '../../../../store/new-version-context';\n\nimport './StepTwo.css';\nimport Feeling from './Feeling.js';\nimport FeelingCard from './FeelingCard.js';\n\nimport StepTwoStatic from './StepTwoStatic';\n\nconst FEELING_CARDS = [\n\t{\n\t\ttitle: 'Low Impact',\n\t\tid: 'low-impact',\n\t\tfeelings: [{ issueTitle: 'low impact', issueImpactType: 'low', id: '1' }],\n\t},\n\t{\n\t\ttitle: 'Medium Impact',\n\t\tid: 'medium-impact',\n\t\tfeelings: [\n\t\t\t{ issueTitle: 'medium impact', issueImpactType: 'medium', id: '2' },\n\t\t],\n\t},\n\t{\n\t\ttitle: 'High Impact',\n\t\tid: 'high-impact',\n\t\tfeelings: [{ issueTitle: 'high impact', issueImpactType: 'high', id: '3' }],\n\t},\n\t{\n\t\ttitle: 'Critical Impact',\n\t\tid: 'critical-impact',\n\t\tfeelings: [\n\t\t\t{ issueTitle: 'critical impact', issueImpactType: 'critical', id: '4' },\n\t\t],\n\t},\n];\n\nconst issues = {\n\tlow: [{ issueTitle: 'low impact', issueImpactType: 'low', id: '1' }],\n\tmedium: [{ issueTitle: 'medium impact', issueImpactType: 'medium', id: '2' }],\n\thigh: [{ issueTitle: 'high impact', issueImpactType: 'high', id: '3' }],\n\tcritical: [\n\t\t{ issueTitle: 'critical impact', issueImpactType: 'critical', id: '4' },\n\t],\n\tdragId: null,\n\tdragSrcId: null,\n};\n\nconst ACTTIONS = {\n\tDROP_ON_LOW: 'drop_on_low',\n\tDROP_ON_MEDIUM: 'drop_on_medium',\n\tDROP_ON_HIGH: 'drop_on_high',\n\tDROP_ON_CRITICAL: 'drop_on_critical',\n\tDRAGGING: 'dragging',\n};\nfunction reducer(state, action) {\n\tlet id = state.dragId;\n\t// let dragSrc = action.payload.dragSourceId;\n\n\tlet prevState = { ...state };\n\tlet issue = null;\n\n\tif (action.type === ACTTIONS.DRAGGING) {\n\t\tstate.dragId = action.payload.dragId;\n\t\tstate.dragSrcId = action.payload.dragSrcId;\n\t\treturn state;\n\t}\n\tif (action.type === ACTTIONS.DROP_ON_LOW) {\n\t\tif (state.dragSrcId === 2) {\n\t\t\tissue = prevState.medium.find((isu) => isu.id == id);\n\t\t\tprevState.medium = prevState.medium.filter((isu) => isu.id != id);\n\t\t} else if (state.dragSrcId === 3) {\n\t\t\tissue = prevState.high.find((isu) => isu.id == id);\n\t\t\tprevState.high = prevState.high.filter((isu) => isu.id != id);\n\t\t} else {\n\t\t\tissue = prevState.critical.find((isu) => isu.id == id);\n\t\t\tprevState.critical = prevState.critical.filter((isu) => isu.id != id);\n\t\t}\n\t\tprevState.low.push(issue);\n\t\treturn (state = { ...prevState });\n\t} else if (action.type === ACTTIONS.DROP_ON_MEDIUM) {\n\t\tif (state.dragSrcId === 3) {\n\t\t\tissue = prevState.high.find((isu) => isu.id == id);\n\t\t\tprevState.high = prevState.high.filter((isu) => isu.id != id);\n\t\t} else if (state.dragSrcId === 4) {\n\t\t\tissue = prevState.critical.find((isu) => isu.id == id);\n\t\t\tprevState.critical = prevState.critical.filter((isu) => isu.id != id);\n\t\t} else {\n\t\t\tissue = prevState.low.find((isu) => isu.id == id);\n\t\t\tprevState.low = prevState.low.filter((isu) => isu.id != id);\n\t\t}\n\t\tprevState.medium.push(issue);\n\t\treturn (state = { ...prevState });\n\t} else if (action.type === ACTTIONS.DROP_ON_HIGH) {\n\t\tif (state.dragSrcId === 2) {\n\t\t\tissue = prevState.medium.find((isu) => isu.id == id);\n\t\t\tprevState.medium = prevState.medium.filter((isu) => isu.id != id);\n\t\t} else if (state.dragSrcId === 4) {\n\t\t\tissue = prevState.critical.find((isu) => isu.id == id);\n\t\t\tprevState.critical = prevState.critical.filter((isu) => isu.id != id);\n\t\t} else {\n\t\t\tissue = prevState.low.find((isu) => isu.id == id);\n\t\t\tprevState.low = prevState.low.filter((isu) => isu.id != id);\n\t\t}\n\t\tprevState.high.push(issue);\n\t\treturn (state = { ...prevState });\n\t} else if (action.type === ACTTIONS.DROP_ON_CRITICAL) {\n\t\tif (state.dragSrcId === 2) {\n\t\t\tissue = prevState.medium.find((isu) => isu.id == id);\n\t\t\tprevState.medium = prevState.medium.filter((isu) => isu.id != id);\n\t\t} else if (state.dragSrcId === 3) {\n\t\t\tissue = prevState.high.find((isu) => isu.id == id);\n\t\t\tprevState.high = prevState.high.filter((isu) => isu.id != id);\n\t\t} else {\n\t\t\tissue = prevState.low.find((isu) => isu.id == id);\n\t\t\tprevState.low = prevState.low.filter((isu) => isu.id != id);\n\t\t}\n\t\tprevState.critical.push(issue);\n\t\treturn (state = { ...prevState });\n\t} else {\n\t\treturn state;\n\t}\n}\n\n// actual functoin definition starts here\nconst StepTwo = (props) => {\n\tconst [state, dispatch] = useReducer(reducer, issues);\n\n\tconst authCtx = useContext(AuthContext);\n\tconst newVerCtx = useContext(NewVersionContext);\n\n\tconst [feelingCards, setFeelingCards] = useState(FEELING_CARDS);\n\n\tconst [firstFeelings, setFirstFeelings] = useState(FEELING_CARDS[0].feelings);\n\tconst [secondFeelings, setSecondFeelings] = useState(\n\t\tFEELING_CARDS[1].feelings\n\t);\n\tconst [thirdFeelings, setThirdFeelings] = useState(FEELING_CARDS[2].feelings);\n\tconst [fourthFeelings, setFourthFeelings] = useState(\n\t\tFEELING_CARDS[3].feelings\n\t);\n\n\t///////////////////////// DRAG & DROP FUNCTIONALITY HERE /////////////////////\n\tconst [draggingFeeling, setDraggingFeeling] = useState(null);\n\n\tconst [dragSourceId, setDragSourceId] = useState(null);\n\n\t////////////////////////////////////// HELPER FUNCTIONS       /////////////////////\n\n\tconst dragStartHandler = (event) => {\n\t\tconsole.log('drag is started', event.target.parentNode.id);\n\t\tevent.target.classList.add('dragging');\n\n\t\tif (event.target.parentNode.id == 4) {\n\t\t\tdispatch({\n\t\t\t\ttype: ACTTIONS.DRAGGING,\n\t\t\t\tpayload: { dragId: event.target.id, dragSrcId: 4 },\n\t\t\t});\n\t\t}\n\t\tif (event.target.parentNode.id == 3) {\n\t\t\tdispatch({\n\t\t\t\ttype: ACTTIONS.DRAGGING,\n\t\t\t\tpayload: { dragId: event.target.id, dragSrcId: 3 },\n\t\t\t});\n\t\t}\n\t\tif (event.target.parentNode.id == 2) {\n\t\t\tdispatch({\n\t\t\t\ttype: ACTTIONS.DRAGGING,\n\t\t\t\tpayload: { dragId: event.target.id, dragSrcId: 2 },\n\t\t\t});\n\t\t}\n\t\tif (event.target.parentNode.id == 1) {\n\t\t\tdispatch({\n\t\t\t\ttype: ACTTIONS.DRAGGING,\n\t\t\t\tpayload: { dragId: event.target.id, dragSrcId: 1 },\n\t\t\t});\n\t\t}\n\t};\n\n\tconst dragEndHandler = (event) => {\n\t\tevent.target.classList.remove('dragging');\n\t};\n\n\tconst dropHandler = (event) => {\n\t\tevent.preventDefault();\n\t\tnewVerCtx.stepOneUnSaver();\n\n\t\tif (event.target.id == 1) {\n\t\t\tif (state.dragSrcId == 1) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdispatch({\n\t\t\t\ttype: ACTTIONS.DROP_ON_LOW,\n\t\t\t\tpayload: { id: event.target.id },\n\t\t\t});\n\t\t} else if (event.target.id == 2) {\n\t\t\tif (state.dragSrcId == 2) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdispatch({\n\t\t\t\ttype: ACTTIONS.DROP_ON_MEDIUM,\n\t\t\t\tpayload: { id: event.target.id },\n\t\t\t});\n\t\t} else if (event.target.id == 3) {\n\t\t\tif (state.dragSrcId == 3) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdispatch({\n\t\t\t\ttype: ACTTIONS.DROP_ON_HIGH,\n\t\t\t\tpayload: { id: event.target.id },\n\t\t\t});\n\t\t} else if (event.target.id == 4) {\n\t\t\tif (state.dragSrcId == 4) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdispatch({\n\t\t\t\ttype: ACTTIONS.DROP_ON_CRITICAL,\n\t\t\t\tpayload: { id: event.target.id },\n\t\t\t});\n\t\t}\n\t\tnewVerCtx.stepTwoIssuesModifier(state);\n\t\t// const issues = {\n\t\t// \tlow: firstFeelings,\n\t\t// \tmedium: secondFeelings,\n\t\t// \thigh: thirdFeelings,\n\t\t// \tcritical: fourthFeelings,\n\t\t// };\n\t\t// newVerCtx.stepTwoIssuesModifier(issues);\n\t};\n\n\tconst allowDrop = (event) => {\n\t\tconsole.log('dragging over element');\n\t\tevent.preventDefault();\n\t};\n\n\t////////////////////////// END DRAG & DROP FUNCTIONALITY HERE ////////////\n\n\tuseEffect(() => {\n\t\t// if (newVerCtx.stepOneSaved) {\n\t\t// \tsetFirstFeelings((prev) => {\n\t\t// \t\treturn [\n\t\t// \t\t\t{\n\t\t// \t\t\t\tid: '1',\n\t\t// \t\t\t\tissueTitle: newVerCtx.stepOneFirst,\n\t\t// \t\t\t\tissueImpactType: 'low',\n\t\t// \t\t\t},\n\t\t// \t\t];\n\t\t// \t});\n\t\t// \tsetSecondFeelings((prev) => {\n\t\t// \t\treturn [\n\t\t// \t\t\t{\n\t\t// \t\t\t\tid: '2',\n\t\t// \t\t\t\tissueTitle: newVerCtx.stepOneSecond,\n\t\t// \t\t\t\tissueImpactType: 'medium',\n\t\t// \t\t\t},\n\t\t// \t\t];\n\t\t// \t});\n\n\t\t// \tsetThirdFeelings((prev) => {\n\t\t// \t\treturn [\n\t\t// \t\t\t{\n\t\t// \t\t\t\tid: '3',\n\t\t// \t\t\t\tissueTitle: newVerCtx.stepOneThird,\n\t\t// \t\t\t\tissueImpactType: 'high',\n\t\t// \t\t\t},\n\t\t// \t\t];\n\t\t// \t});\n\t\t// \tsetFourthFeelings([]);\n\t\t// }\n\n\t\t// for stepTwo Issues in NewVersionContext\n\n\t\t// (async function () {\n\t\t// \tlet response = await getIssues(newVerCtx.versionId);\n\t\t// \t//console.log(response.data[0].issueImpactType[0]);\n\n\t\t// \tif (response.success && response.data.length > 0) {\n\t\t// \t\tresponse.data.map((issue) => {\n\t\t// \t\t\tif (issue.issueImpactType[0] === 'low') {\n\t\t// \t\t\t\tsetFirstFeelings((prev) => [issue]);\n\t\t// \t\t\t} else if (issue.issueImpactType[0] === 'medium') {\n\t\t// \t\t\t\tsetSecondFeelings((prev) => [issue]);\n\t\t// \t\t\t} else if (issue.issueImpactType[0] === 'high') {\n\t\t// \t\t\t\tsetThirdFeelings((prev) => [issue]);\n\t\t// \t\t\t} else if (issue.issueImpactType[0] === 'critical') {\n\t\t// \t\t\t\tsetFourthFeelings((prev) => [issue]);\n\t\t// \t\t\t}\n\t\t// \t\t});\n\n\t\t// \t\tconsole.log(response.data);\n\t\t// \t}\n\t\t// })();\n\t\tconst issues = {\n\t\t\tlow: firstFeelings,\n\t\t\tmedium: secondFeelings,\n\t\t\thigh: thirdFeelings,\n\t\t\tcritical: fourthFeelings,\n\t\t};\n\t\tnewVerCtx.stepTwoIssuesModifier(issues);\n\t}, []);\n\n\treturn (\n\t\t<section className='stepTwoOfEleven'>\n\t\t\t<StepTwoStatic />\n\n\t\t\t<div className='feelings-cards-container'>\n\t\t\t\t<div className='feeling-card' id='1'>\n\t\t\t\t\t<div className='feeling-card__title'>{feelingCards[0].title}</div>\n\t\t\t\t\t<FeelingCard\n\t\t\t\t\t\tid='1'\n\t\t\t\t\t\tkey={1}\n\t\t\t\t\t\tfeelings={state.low}\n\t\t\t\t\t\tonDragStart={dragStartHandler}\n\t\t\t\t\t\tonDragEnd={dragEndHandler}\n\t\t\t\t\t\tonDragOver={allowDrop}\n\t\t\t\t\t\tonDrop={dropHandler}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className='feeling-card' id='2'>\n\t\t\t\t\t<div className='feeling-card__title'>{feelingCards[1].title}</div>\n\t\t\t\t\t<FeelingCard\n\t\t\t\t\t\tid='2'\n\t\t\t\t\t\tkey={2}\n\t\t\t\t\t\tfeelings={state.medium}\n\t\t\t\t\t\tonDragStart={dragStartHandler}\n\t\t\t\t\t\tonDragEnd={dragEndHandler}\n\t\t\t\t\t\tonDragOver={allowDrop}\n\t\t\t\t\t\tonDrop={dropHandler}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className='feeling-card' id='3'>\n\t\t\t\t\t<div className='feeling-card__title'>{feelingCards[2].title}</div>\n\t\t\t\t\t<FeelingCard\n\t\t\t\t\t\tid='3'\n\t\t\t\t\t\tkey={3}\n\t\t\t\t\t\tfeelings={state.high}\n\t\t\t\t\t\tonDragStart={dragStartHandler}\n\t\t\t\t\t\tonDragEnd={dragEndHandler}\n\t\t\t\t\t\tonDragOver={allowDrop}\n\t\t\t\t\t\tonDrop={dropHandler}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className='feeling-card' id='4'>\n\t\t\t\t\t<div className='feeling-card__title'>{feelingCards[3].title}</div>\n\t\t\t\t\t<FeelingCard\n\t\t\t\t\t\tid='4'\n\t\t\t\t\t\tkey={4}\n\t\t\t\t\t\tfeelings={state.critical}\n\t\t\t\t\t\tonDragStart={dragStartHandler}\n\t\t\t\t\t\tonDragEnd={dragEndHandler}\n\t\t\t\t\t\tonDragOver={allowDrop}\n\t\t\t\t\t\tonDrop={dropHandler}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n\nexport default StepTwo;\n"]},"metadata":{},"sourceType":"module"}